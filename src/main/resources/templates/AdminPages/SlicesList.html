<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenCluster - Gestión de Slices</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/admin-styles.css}">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div th:replace="~{Fragments/Admin/sidebar :: sidebar('slices')}"></div>

        <!-- Contenido principal -->
        <main class="main-content">
            <!-- Header -->
            <div th:replace="~{Fragments/Admin/header :: header(title='Listado de Slices Asignados')}"></div>

            <section class="page-content">
                <div class="content-header">
                    <h2 class="content-title">Listado de Slices Asignados</h2>
                    <div class="header-actions">
                        <button class="btn btn-outline" id="btnFilter">
                            <i class="fas fa-filter"></i>
                            <span class="btn-text">Filtrar</span>
                        </button>
                        <button class="btn btn-primary" id="btnCreateSlice">
                            <i class="fas fa-plus"></i>
                            <span class="btn-text">Nuevo Slice</span>
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-tabs">
                        <div class="card-tab active" data-tab="own-slices">Propios</div>
                        <div class="card-tab" data-tab="others-slices">De Otros</div>
                        <div class="card-tab" data-tab="shared-slices">Compartidos</div>
                    </div>

                    <!-- Contenido de la pestaña Propios -->
                    <div class="tab-content active" id="own-slices">
                        <div class="tab-search">
                            <input type="text" id="search-own" placeholder="Buscar por nombre o ID...">
                            <button class="btn btn-primary btn-icon">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID <i class="fas fa-sort"></i></th>
                                        <th>Nombre <i class="fas fa-sort"></i></th>
                                        <th>Usuario <i class="fas fa-sort"></i></th>
                                        <th>Topología <i class="fas fa-sort"></i></th>
                                        <th>Recursos <i class="fas fa-sort"></i></th>
                                        <th>Fecha de creación <i class="fas fa-sort"></i></th>
                                        <th>Estado <i class="fas fa-sort"></i></th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#SL-1024</td>
                                        <td>Kubernetes Demo</td>
                                        <td>miguel.lopez@empresa.com</td>
                                        <td>K8s Single Cluster</td>
                                        <td>4 vCPU, 8GB RAM</td>
                                        <td>10/04/2025</td>
                                        <td><span class="badge badge-active">Activo</span></td>
                                        <td class="actions">
                                            <button class="action-btn" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="action-btn" title="Editar">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="action-btn delete" title="Eliminar">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#SL-1023</td>
                                        <td>Desarrollo Web</td>
                                        <td>ana.martinez@empresa.com</td>
                                        <td>LAMP Stack</td>
                                        <td>2 vCPU, 4GB RAM</td>
                                        <td>08/04/2025</td>
                                        <td><span class="badge badge-active">Activo</span></td>
                                        <td class="actions">
                                            <button class="action-btn" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="action-btn" title="Editar">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="action-btn delete" title="Eliminar">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#SL-1022</td>
                                        <td>Data Science</td>
                                        <td>pablo.gomez@empresa.com</td>
                                        <td>ML Cluster</td>
                                        <td>8 vCPU, 16GB RAM</td>
                                        <td>01/04/2025</td>
                                        <td><span class="badge badge-active">Activo</span></td>
                                        <td class="actions">
                                            <button class="action-btn" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="action-btn" title="Editar">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="action-btn delete" title="Eliminar">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="pagination">
                            <div class="pagination-info">
                                Mostrando 1-3 de 3 elementos
                            </div>
                            <div class="pagination-controls">
                                <button class="pagination-btn" disabled>Anterior</button>
                                <button class="pagination-btn active">1</button>
                                <button class="pagination-btn" disabled>Siguiente</button>
                            </div>
                        </div>
                    </div>

                    <!-- Contenido de la pestaña De Otros -->
                    <div class="tab-content" id="others-slices">
                        <div class="tab-search">
                            <input type="text" id="search-others" placeholder="Buscar por nombre o ID...">
                            <button class="btn btn-primary btn-icon">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                        
                        <h3 style="margin-bottom: 16px; font-size: 1.1rem; color: var(--dark-color);">Agrupados (donde no estás tú)</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID <i class="fas fa-sort"></i></th>
                                        <th>Nombre <i class="fas fa-sort"></i></th>
                                        <th>Propietario <i class="fas fa-sort"></i></th>
                                        <th>Topología <i class="fas fa-sort"></i></th>
                                        <th>Recursos <i class="fas fa-sort"></i></th>
                                        <th>Estado <i class="fas fa-sort"></i></th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#SL-985</td>
                                        <td>Slice-Team-A-001</td>
                                        <td>Equipo A</td>
                                        <td>OpenStack</td>
                                        <td>8 vCPU, 16GB RAM</td>
                                        <td><span class="badge badge-active">Activo</span></td>
                                        <td class="actions">
                                            <button class="action-btn" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#SL-962</td>
                                        <td>Slice-Team-B-002</td>
                                        <td>Equipo B</td>
                                        <td>AWS</td>
                                        <td>4 vCPU, 8GB RAM</td>
                                        <td><span class="badge badge-active">Activo</span></td>
                                        <td class="actions">
                                            <button class="action-btn" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h3 style="margin: 24px 0 16px; font-size: 1.1rem; color: var(--dark-color);">Personales de Usuarios (No Admin)</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID <i class="fas fa-sort"></i></th>
                                        <th>Nombre <i class="fas fa-sort"></i></th>
                                        <th>Usuario <i class="fas fa-sort"></i></th>
                                        <th>Topología <i class="fas fa-sort"></i></th>
                                        <th>Recursos <i class="fas fa-sort"></i></th>
                                        <th>Estado <i class="fas fa-sort"></i></th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#SL-854</td>
                                        <td>Dev-Environment</td>
                                        <td>Maria González</td>
                                        <td>LinuxCluster</td>
                                        <td>2 vCPU, 4GB RAM</td>
                                        <td><span class="badge badge-active">Activo</span></td>
                                        <td class="actions">
                                            <button class="action-btn" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#SL-842</td>
                                        <td>Testing-Environment</td>
                                        <td>Carlos Rodríguez</td>
                                        <td>OpenStack</td>
                                        <td>1 vCPU, 2GB RAM</td>
                                        <td><span class="badge badge-active">Activo</span></td>
                                        <td class="actions">
                                            <button class="action-btn" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Contenido de la pestaña Compartidos -->
                    <div class="tab-content" id="shared-slices">
                        <div class="tab-search">
                            <input type="text" id="search-shared" placeholder="Buscar por nombre o ID...">
                            <button class="btn btn-primary btn-icon">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID <i class="fas fa-sort"></i></th>
                                        <th>Nombre <i class="fas fa-sort"></i></th>
                                        <th>Propietario <i class="fas fa-sort"></i></th>
                                        <th>Topología <i class="fas fa-sort"></i></th>
                                        <th>Recursos <i class="fas fa-sort"></i></th>
                                        <th>Estado <i class="fas fa-sort"></i></th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#SL-738</td>
                                        <td>Project-Alpha</td>
                                        <td>Laura Martínez</td>
                                        <td>OpenStack</td>
                                        <td>6 vCPU, 12GB RAM</td>
                                        <td><span class="badge badge-active">Activo</span></td>
                                        <td class="actions">
                                            <button class="action-btn" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#SL-712</td>
                                        <td>Project-Beta</td>
                                        <td>Pedro Sánchez</td>
                                        <td>AWS</td>
                                        <td>4 vCPU, 8GB RAM</td>
                                        <td><span class="badge badge-active">Activo</span></td>
                                        <td class="actions">
                                            <button class="action-btn" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="pagination">
                            <div class="pagination-info">
                                Mostrando 1-2 de 2 elementos
                            </div>
                            <div class="pagination-controls">
                                <button class="pagination-btn" disabled>Anterior</button>
                                <button class="pagination-btn active">1</button>
                                <button class="pagination-btn" disabled>Siguiente</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <!-- Modal para crear slice -->
    <div class="modal" id="createSliceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Crear Nuevo Slice</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" for="sliceName">Nombre del Slice</label>
                    <input type="text" id="sliceName" class="form-control" placeholder="Ingrese nombre del slice">
                </div>
                <div class="form-group">
                    <label class="form-label" for="sliceDeployment">Gestor de Despliegue</label>
                    <select id="sliceDeployment" class="form-control">
                        <option value="OpenStack">OpenStack</option>
                        <option value="LinuxCluster">LinuxCluster</option>
                        <option value="AWS">AWS</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="sliceDescription">Descripción</label>
                    <textarea id="sliceDescription" class="form-control" placeholder="Ingrese descripción del slice"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="sliceVMs">Número de VM's</label>
                    <input type="number" id="sliceVMs" class="form-control" min="1" value="1">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelSlice">Cancelar</button>
                <button class="btn btn-primary" id="saveSlice">Guardar</button>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Referencias de elementos DOM
            const sidebar = document.querySelector('.sidebar');
            const mainContent = document.querySelector('.main-content');
            const sidebarToggle = document.querySelector('.sidebar-toggle');
            const menuToggle = document.querySelector('.menu-toggle');
            const pageTitle = document.querySelector('.page-title');
            const sectionLinks = document.querySelectorAll('.sidebar-menu a[data-section]');
            const modal = document.getElementById('createSliceModal');
            const btnCreateSlice = document.getElementById('btnCreateSlice');
            const modalClose = document.querySelector('.modal-close');
            const cancelSlice = document.getElementById('cancelSlice');
            const saveSlice = document.getElementById('saveSlice');
            const cardTabs = document.querySelectorAll('.card-tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const searchInputs = document.querySelectorAll('input[id^="search-"]');
            
            // Ocultar sidebar
            function toggleSidebar() {
                sidebar.classList.toggle('hidden');
                mainContent.classList.toggle('full-width');
            }
            
            sidebarToggle.addEventListener('click', toggleSidebar);
            menuToggle.addEventListener('click', toggleSidebar);
            
            // Navegación entre secciones
            sectionLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Actualizar clase activa en menú
                    sectionLinks.forEach(item => item.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Actualizar título de página
                    const sectionTitle = this.querySelector('span').textContent;
                    pageTitle.textContent = sectionTitle;
                    
                    // En dispositivos móviles, cerrar sidebar al navegar
                    if (window.innerWidth <= 768) {
                        toggleSidebar();
                    }
                });
            });
            
            // Modal
            function openModal() {
                modal.style.display = 'block';
            }
            
            function closeModal() {
                modal.style.display = 'none';
            }
            
            btnCreateSlice.addEventListener('click', openModal);
            modalClose.addEventListener('click', closeModal);
            cancelSlice.addEventListener('click', closeModal);
            
            window.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            saveSlice.addEventListener('click', function() {
                const sliceName = document.getElementById('sliceName').value;
                const deployment = document.getElementById('sliceDeployment').value;
                
                if (sliceName && deployment) {
                    alert('Slice creado con éxito: ' + sliceName);
                    closeModal();
                    
                    document.getElementById('sliceName').value = '';
                    document.getElementById('sliceDescription').value = '';
                    document.getElementById('sliceVMs').value = '1';
                } else {
                    alert('Por favor complete los campos requeridos');
                }
            });
            
            // Pestañas
            cardTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    cardTabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Búsqueda en tablas
            searchInputs.forEach(input => {
                input.addEventListener('keyup', function() {
                    const searchValue = this.value.toLowerCase();
                    const tabId = this.id.split('-')[1]; // 'own', 'others', or 'shared'
                    const tableRows = document.querySelectorAll(`#${tabId}-slices tbody tr`);
                    
                    tableRows.forEach(row => {
                        const text = row.textContent.toLowerCase();
                        if (text.includes(searchValue)) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                    });
                });
            });

        });
    </script>
</body>
</html>
